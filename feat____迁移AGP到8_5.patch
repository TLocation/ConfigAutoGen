Subject: [PATCH] feat |> 迁移AGP到8.5
---
Index: .idea/compiler.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/compiler.xml b/.idea/compiler.xml
--- a/.idea/compiler.xml	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/.idea/compiler.xml	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="CompilerConfiguration">
-    <bytecodeTargetLevel target="11">
+    <bytecodeTargetLevel target="17">
       <module name="ConfigAutoGen.configmerge.main" target="11" />
       <module name="ConfigAutoGen.configmerge.test" target="11" />
     </bytecodeTargetLevel>
Index: configgen-core/src/main/java/com/location/configgen/core/ProjectKts.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/configgen-core/src/main/java/com/location/configgen/core/ProjectKts.kt b/configgen-core/src/main/java/com/location/configgen/core/ProjectKts.kt
--- a/configgen-core/src/main/java/com/location/configgen/core/ProjectKts.kt	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/configgen-core/src/main/java/com/location/configgen/core/ProjectKts.kt	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -10,4 +10,4 @@
  * description：
  */
 val Project.configMergeJavaSourceDir
-    get() = "${buildDir.absolutePath}${File.separator}generated${File.separator}source${File.separator}configMerge${File.separator}"
\ No newline at end of file
+    get() = "${layout.buildDirectory.asFile.get().absolutePath}${File.separator}generated${File.separator}source${File.separator}configMerge${File.separator}"
\ No newline at end of file
Index: configgen-core/src/main/java/com/location/configgen/core/codeGen/ClassGenerate.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/configgen-core/src/main/java/com/location/configgen/core/codeGen/ClassGenerate.kt b/configgen-core/src/main/java/com/location/configgen/core/codeGen/ClassGenerate.kt
--- a/configgen-core/src/main/java/com/location/configgen/core/codeGen/ClassGenerate.kt	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/configgen-core/src/main/java/com/location/configgen/core/codeGen/ClassGenerate.kt	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -2,7 +2,7 @@
 
 import com.location.configgen.core.datanode.ValueType
 import com.location.configgen.core.datanode.valueType
-import org.gradle.internal.impldep.org.jetbrains.annotations.VisibleForTesting
+import org.jetbrains.annotations.VisibleForTesting
 import org.json.simple.JSONArray
 import org.json.simple.JSONObject
 import org.json.simple.parser.JSONParser
Index: configgen-java/build.gradle.kts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/configgen-java/build.gradle.kts b/configgen-java/build.gradle.kts
--- a/configgen-java/build.gradle.kts	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/configgen-java/build.gradle.kts	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -1,3 +1,5 @@
+import org.gradle.kotlin.dsl.support.kotlinCompilerOptions
+
 @Suppress("DSL_SCOPE_VIOLATION") // TODO: Remove once KTIJ-19369 is fixed
 plugins {
     id("java-gradle-plugin")
@@ -7,8 +9,9 @@
 //apply(from = "${rootProject.rootDir.absolutePath}/configgen-core/build.gradle.kts")
 
 java {
-    sourceCompatibility = JavaVersion.VERSION_11
-    targetCompatibility = JavaVersion.VERSION_11
+    sourceCompatibility = JavaVersion.VERSION_17
+    targetCompatibility = JavaVersion.VERSION_17
+
 }
 
 sourceSets {
Index: configgen-java/src/main/java/com/location/confimerge_java/JavaClassGenerate.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/configgen-java/src/main/java/com/location/confimerge_java/JavaClassGenerate.kt b/configgen-java/src/main/java/com/location/confimerge_java/JavaClassGenerate.kt
--- a/configgen-java/src/main/java/com/location/confimerge_java/JavaClassGenerate.kt	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/configgen-java/src/main/java/com/location/confimerge_java/JavaClassGenerate.kt	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -14,7 +14,7 @@
 import com.squareup.javapoet.ParameterizedTypeName
 import com.squareup.javapoet.TypeName
 import com.squareup.javapoet.TypeSpec
-import org.gradle.internal.impldep.org.jetbrains.annotations.VisibleForTesting
+import org.jetbrains.annotations.VisibleForTesting
 import org.json.simple.JSONArray
 import org.json.simple.JSONObject
 import java.io.File
Index: gradle.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle.properties b/gradle.properties
--- a/gradle.properties	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/gradle.properties	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -20,4 +20,5 @@
 # Enables namespacing of each library's R class so that its R class includes only the
 # resources declared in the library itself and none from the library's dependencies,
 # thereby reducing the size of the R class for that library
-android.nonTransitiveRClass=true
\ No newline at end of file
+android.nonTransitiveRClass=true
+android.nonFinalResIds=false
\ No newline at end of file
Index: gradle/libs.versions.toml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/gradle/libs.versions.toml b/gradle/libs.versions.toml
--- a/gradle/libs.versions.toml	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/gradle/libs.versions.toml	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -1,5 +1,5 @@
 [versions]
-agp = "7.4.0"
+agp = "8.5.0"
 kotlin = "1.9.22"
 core-ktx = "1.9.0"
 junit = "4.13.2"
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
--- a/gradle/wrapper/gradle-wrapper.properties	(revision a79e5b90ad35f818364b50a17c3ba668806a34e3)
+++ b/gradle/wrapper/gradle-wrapper.properties	(revision 556212172d072d396b3d2c52018d007113bc2aed)
@@ -1,6 +1,6 @@
 #Tue Jun 04 15:10:17 CST 2024
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-7.5-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-8.7-bin.zip
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
